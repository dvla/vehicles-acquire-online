@(viewModel: models.AcquireCompletionViewModel, surveyUrl: Option[String])(implicit lang: Lang,
    token: uk.gov.dvla.vehicles.presentation.common.filters.CsrfPreventionAction.CsrfPreventionToken,
    config: utils.helpers.Config)

@import controllers.routes.SetUpTradeDetails
@import views.acquire.BeforeYouStart.NextId
@import uk.gov.dvla.vehicles.presentation.common
@import views.html.helper.form
@import views.acquire.AcquireSuccess.{BuyAnotherId, FinishId}
@import common.views.html.widgets.base.csrfTokenHiddenField

@main(
    progress = Some(Messages("acquire_progress_9")),
    title = "Summary"
) {

<div class="two-col clearfix acquire-success">

    <div class="second-col">

        <div class="alert-complete">
            <h1>@Messages("acquire_success.complete.header")</h1>
            <p>@Messages("acquire_success.complete.p1")</p>
            <div class="alert-warning"><p><strong>@Messages("acquire_success.complete.p2")</strong></p></div>
        </div>

        <h2>@Messages("acquire_success.further_information.header")</h2>

        <ul>
            <li>@Messages("acquire_success.further_information.p1")</li>
            <li>@Messages("acquire_success.further_information.p2")</li>
        </ul>

        <dl class="playback transaction-details mobile-only">
            <h2>@Messages("acquire_success.transaction_details.header")</h2>
            <dt>@Messages("acquire_success.transaction_details.transaction_id")</dt>
            <dd>@viewModel.completeAndConfirmResponseModel.transactionId</dd>
            <dt>@Messages("acquire_success.transaction_details.transaction_date")</dt>
            <dd>@viewModel.completeAndConfirmResponseModel.transactionTimestamp.toString("dd/MM/yyyy")</dd>
        </dl>

        <div class="related vehicle-sold-by mobile-only">
            <dl class="playback bg-plain">
                <dt><h2>@Messages("acquire_success.trader_details.header")</h2></dt>
                <dt>@Messages("acquire_success.trader_details.trader_name")</dt>
                <dd>@viewModel.traderDetails.traderName</dd>
                <dt>@Messages("acquire_success.trader_details.trader_address")</dt>
                <dd>@for(addr <- viewModel.traderDetails.traderAddress.address) {@addr<br/>}</dd>
                <dt>@Messages("acquire_success.trader_details.trader_email")</dt>
                <dd>@viewModel.traderDetails.traderEmail.getOrElse(Messages("acquire_email_not_entered"))</dd>
                <dt>@Messages("acquire_success.date_of_sale.label")</dt>
                <dd>@viewModel.completeAndConfirmDetails.dateOfSale.toString("dd/MM/yyyy")</dd>
            </dl>
        </div>

        <div class="alert-warning">
            <p><strong>@Messages("acquire_success.further_information.alert")</strong></p>
        </div>

        <div class="form-steps">
            <div class="step">
                <button id="printDisposalSuccess"
                    type="button"
                    name="action"
                    value="printDisposalSuccess"
                    class="button js-only print-button">
                    @Messages("acquire_success.buttonnavprint")
                </button>
            </div>
            <div class="step">
                @form(action = controllers.routes.AcquireSuccess.buyAnother()) {
                    @csrfTokenHiddenField()
                    <button id="@BuyAnotherId"
                        type="submit"
                        name="action"
                        data-tracking="summary_action"
                        class="button button-new-disposal button-secondary success-buy-another-btn">
                        @Messages("acquire_success.buyAnother")
                    </button>
                }
            </div>
            <div class="step">
                @form(action = controllers.routes.AcquireSuccess.finish()) {
                    @csrfTokenHiddenField()
                    @surveyUrl match {
                        case Some(url) => {
                            <button id="@FinishId"
                                type="submit"
                                name="action"
                                onclick="window.open('@url', '_blank');"
                                data-tracking="summary_action"
                                class="button button-new-disposal button-secondary success-finish-btn">
                                @Messages("acquire_success.finish")
                            </button>
                        }
                        case None => {
                            <button id="@FinishId"
                                type="submit"
                                name="action"
                                data-tracking="summary_action"
                                class="button button-new-disposal button-secondary success-finish-btn">
                                @Messages("acquire_success.finish")
                            </button>
                        }
                    }
                }
            </div>
        </div>
    </div>

    <div class="first-col">
        <dl class="playback transaction-details desktop-only">
            <h2>@Messages("acquire_success.transaction_details.header")</h2>
            <dt>@Messages("acquire_success.transaction_details.transaction_id")</dt>
            <dd>@viewModel.completeAndConfirmResponseModel.transactionId</dd>
            <dt>@Messages("acquire_success.transaction_details.transaction_date")</dt>
            <dd>@viewModel.completeAndConfirmResponseModel.transactionTimestamp.toString("dd/MM/yyyy")</dd>
        </dl>

        <div class="related vehicle-sold-by desktop-only">
            <dl class="playback bg-plain">
                <dt><h2>@Messages("acquire_success.trader_details.header")</h2></dt>
                <dt>@Messages("acquire_success.trader_details.trader_name")</dt>
                <dd>@viewModel.traderDetails.traderName</dd>
                <dt>@Messages("acquire_success.trader_details.trader_address")</dt>
                <dd>@for(addr <- viewModel.traderDetails.traderAddress.address) {@addr<br/>}</dd>
                <dt>@Messages("acquire_success.trader_details.trader_email")</dt>
                <dd>@viewModel.traderDetails.traderEmail.getOrElse(Messages("acquire_email_not_entered"))</dd>
                <dt>@Messages("acquire_success.date_of_sale.label")</dt>
                <dd>@viewModel.completeAndConfirmDetails.dateOfSale.toString("dd/MM/yyyy")</dd>
            </dl>
        </div>

        <div class="acquire-success-summary-playback">
            <h2>@Messages("acquire_success.vehicle_details.p1")</h2>
            <div class="info-notice">
                <dl class="playback">
                    <dt>@Messages("acquire_success.vehicle_details.registration_number")</dt>
                    <dd class="uppercase-text">@viewModel.vehicleDetails.registrationNumber</dd>
                    <dt>@Messages("acquire_success.vehicle_details.make")</dt>
                    <dd class="uppercase-text">@viewModel.vehicleDetails.make</dd>
                    <dt>@Messages("acquire_success.vehicle_details.model")</dt>
                    <dd class="uppercase-text">@viewModel.vehicleDetails.model</dd>
                    <dt>@Messages("acquire_success.vehicle_details.taxOrSorn")</dt>

                    @if(viewModel.vehicleSorn.sornVehicle == None) {
                    <dd class="tax-or-sorn uppercase-text">@Messages("acquire_success.vehicle_details.sornNotEntered")</dd>
                    } else {
                    <dd class="tax-or-sorn uppercase-text">
                        @Messages("acquire_success.vehicle_details.sornEntered",
                            viewModel.completeAndConfirmResponseModel.transactionTimestamp.toString("dd/MM/yyyy")
                        )
                    </dd>
                    <dd class="word-wrap-only tax-or-sorn-sub">@Messages("acquire_success.vehicle_details.sornEntered.p1")</dd>
                    }
                    <dt>@Messages("acquire_success.vehicle_details.mileage")</dt>
                    @if(viewModel.completeAndConfirmDetails.mileage == None) {
                    <dd class="uppercase-text">@Messages("acquire_success.vehicle_details.mileage_not_entered")</dd>
                    } else {
                    <dd class="uppercase-text">
                        @{java.text.NumberFormat.getIntegerInstance().format(viewModel.completeAndConfirmDetails.mileage.get)}
                    </dd>
                    }
                </dl>
            </div>

            <h2>@Messages("acquire_success.new_keeper_details.p1")</h2>

            <div class="info-notice">
                <dl class="playback">
                    <dt>@Messages("acquire_success.vehicle_details.name")</dt>
                    <dd class="uppercase-text">@viewModel.newKeeperDetails.displayName</dd>
                    <dt>@Messages("acquire_success.vehicle_details.address")</dt>
                    <dd class="uppercase-text">@for(addr <- viewModel.newKeeperDetails.address.address) {@addr<br/>}</dd>
                    <dt>@Messages("acquire_success.vehicle_details.email")</dt>
                    <dd class="uppercase-text">
                        @viewModel.newKeeperDetails.email.getOrElse(Messages("acquire_email_not_entered"))
                    </dd>
                </dl>
            </div>
        </div>
    </div>
</div>
}
