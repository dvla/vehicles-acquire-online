@(data: models.BusinessKeeperDetailsCompleteViewModel)(implicit lang: Lang,
  token: uk.gov.dvla.vehicles.presentation.common.filters.CsrfPreventionAction.CsrfPreventionToken,
  config: utils.helpers.Config)

@import views.html.helper.form
@import controllers.routes.BusinessKeeperDetailsComplete
@import uk.gov.dvla.vehicles.presentation.common
@import common.mappings.Mileage
@import common.views.html.widgets.dates.valtechDate
@import common.views.html.widgets.base.csrfTokenHiddenField
@import common.views.helpers.BaseTemplate.fieldConstructor
@import common.views.html.widgets.base.{valtechInputText, valtechDeclareCheck}
@import models.BusinessKeeperDetailsCompleteFormModel.Form.{MileageId, ConsentId, DateOfSaleId}
@import views.acquire.BusinessKeeperDetailsComplete.{BackId, SubmitId}

@main(
    progress = Some(Messages("acquire_progress_7")),
    title = Messages("acquire_businesskeeperdetailscomplete.title"),
    currentForm = Some(data.form)
) {
    @form(action = BusinessKeeperDetailsComplete.submit) {
        @csrfTokenHiddenField()

        <p>@Messages("acquire_businesskeeperdetailscomplete.p1")</p>

        <script src="@routes.Assets.at("lib/vehicles-presentation-common/javascripts/numeric-input-only.js")" type="text/javascript"></script>

        @valtechInputText(
            data.form(MileageId), args =
            Map('_label -> Messages("acquire_businesskeeperdetailscomplete.mileage.label"),
                '_showConstraints -> false,
                'typeTel -> true,
                'maxLength -> Mileage.MaxLength // Must be set independently of the pattern as the pattern is only checked when the user submits.
                //'title -> Messages("acquire_businesskeeperdetailscomplete.mileage.validation")
            ) ++
            (if(config.isHtml5ValidationEnabled) Map('pattern -> Mileage.Pattern) else Nil)
        )

        @valtechDate(
            data.form(DateOfSaleId),
            Messages("businesskeeper_dateofsale")
        )

        @valtechDeclareCheck(
            data.form(ConsentId),
            args = Map(
                '_showConstraints -> false,
                '_label -> Messages("acquire_keeperdetailscomplete.consent")
            )
        )

        <div class="second-col">
            <div class="form-steps">
                <button id="@SubmitId" type="submit" name="action" class="button">
                    @Messages("acquire_businesskeeperdetailscomplete.submitbutton")
                </button>
                <a id="@BackId" href="@controllers.routes.BusinessKeeperDetails.present()" class="button-secondary">
                    @Messages("acquire_businesskeeperdetailscomplete.backbutton")
                </a>
            </div>
        </div>
    }
}
